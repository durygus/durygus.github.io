<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Открыть почтовый клиент</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
        }
        #mailtoFrame {
            display: none;
        }
        #mailtoButton {
            padding: 15px 30px;
            background-color: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            display: inline-block;
        }
    </style>
</head>
<body>
    <h2>Нажмите, чтобы открыть ваш почтовый клиент</h2>
    <p>Это действие откроет ваш настроенный почтовый клиент для отправки письма на указанный адрес.</p>
    <a id="mailtoButton" href="#">Открыть почту</a>
    <iframe id="mailtoFrame"></iframe>
    <script>
        const params = new URLSearchParams(window.location.search);
        const email = params.get('email') || 'vadim@guslistov.com';
        const button = document.getElementById('mailtoButton');
        const frame = document.getElementById('mailtoFrame');
        button.textContent = `Отправить письмо на ${email}`;
        button.onclick = () => {
            // Создаём содержимое iframe, имитирующее письмо
            frame.contentDocument.write(`
                <!DOCTYPE html>
                <html lang="ru">
                <head>
                    <meta charset="UTF-8">
                    <title>Mailto Link</title>
                </head>
                <body>
                    <a id="mailLink" href="mailto:${email}" rel="noopener noreferrer" target="_blank">Open Mail</a>
                    <script>
                        const link = document.getElementById('mailLink');
                        link.click();
                    </script>
                </body>
                </html>
            `);
            frame.contentDocument.close();
        };
    </script>
</body>
</html>

<!--<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><script>const p=new URLSearchParams(window.location.search);const e=p.get('email')||'test@example.com';const a=document.createElement('a');a.href=`mailto:${e}`;a.style.display='none';document.body.appendChild(a);a.click();</script></body></html>-->

<!-- Universal code -->
<!--<!DOCTYPE html><html><head><meta charset="UTF-8"></head><body><script>const p=new URLSearchParams(window.location.search);const c=p.get('content');if(c){try{const d=atob(decodeURIComponent(c));const m=d.match(/"(mailto:[^"]+)"/);if(m&&m[1]){window.location=m[1];}else{console.log('No mailto URL found in content');}}catch(e){console.log('Error:',e);}}</script></body></html>-->

